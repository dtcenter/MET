#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass book
\use_default_options true
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement H
\paperfontsize default
\spacing onehalf
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_minted 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 1in
\topmargin 1in
\rightmargin 1in
\bottommargin 1in
\secnumdepth 3
\tocdepth 3
\paragraph_separation skip
\defskip bigskip
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\end_header

\begin_body

\begin_layout Chapter
Re-Formatting of Point Observations
\begin_inset CommandInset label
LatexCommand label
name "chap:Re-Formatting-of-Point"

\end_inset


\end_layout

\begin_layout Standard

\series medium
There are several formats of point observations that may preprocessed using
 the suite of reformatting tools in MET.
 These include 
\series default
PrepBUFR
\series medium
 data from NCEP, SURFRAD data from NOAA, AERONET data from NASA, MADIS data
 from NOAA, little_r from WRF simulations, and user-defined data in a generic
 ASCII format.
 These steps are represented by the first columns in the MET flowchart depicted
 in Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "Fig_Overview_MET_Overview_Flowchart"

\end_inset

.
 The software tools used to reformat point data are described in this chapter.
\end_layout

\begin_layout Section
PB2NC tool
\begin_inset CommandInset label
LatexCommand label
name "sec:PB2NC-tool"

\end_inset


\end_layout

\begin_layout Standard

\series medium
This section describes how to configure and run the PB2NC tool.
 The PB2NC tool is used to stratify the contents of an input 
\series default
PrepBUFR
\series medium
 point observation file and reformat it into NetCDF format for use by other
 MET tools.
 The PB2NC tool must be run on the input 
\series default
PrepBUFR
\series medium
 point observation file prior to performing verification with the MET statistics
 tools.
\end_layout

\begin_layout Subsection
pb2nc usage
\begin_inset CommandInset label
LatexCommand label
name "subsec:pb2nc-usage"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The usage statement for the PB2NC tool is shown below:
\end_layout

\begin_layout LyX-Code

\series bold
Usage:
\series default
 pb2nc
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

prepbufr_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

netcdf_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

config_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-pbfile PrepBUFR_file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-valid_beg time]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-valid_end time]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-nmsg n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-dump path]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-index]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-log file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-v level]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-compress level]
\end_layout

\begin_layout Standard
pb2nc has both required and optional arguments.
 
\end_layout

\begin_layout Standard

\series bold
\bar under
Required arguments for pb2nc
\end_layout

\begin_layout Description

\series medium
1.
 The 
\series bold
prepbufr_file
\series medium
 argument is the 
\series default
input PrepBUFR
\series medium
 file to be processed.
\end_layout

\begin_layout Description

\series medium
2.
 The 
\series bold
netcdf_file
\series medium
 argument is the output NetCDF file to be written.
\end_layout

\begin_layout Description

\series medium
3.
 The 
\series bold
config_file
\series medium
 argument is the configuration file to be used.
 The contents of the configuration file are discussed below.
\end_layout

\begin_layout Standard

\series bold
\bar under
Optional arguments for pb2nc
\end_layout

\begin_layout Description

\series medium
1.
 The 
\series bold
-pbfile prepbufr_file
\series medium
 option is used to pass additional 
\series default
input PrepBUFR
\series medium
 files.
\end_layout

\begin_layout Description

\series medium
2.
 The 
\series bold
-valid_beg time
\series medium
 option in YYYYMMDD[_HH[MMSS]] format sets the beginning of the retention
 time window.
\end_layout

\begin_layout Description

\series medium
3.
 The 
\series bold
-valid_end time
\series medium
 option in YYYYMMDD[_HH[MMSS]] format sets the end of the retention time
 window.
\end_layout

\begin_layout Description

\series medium
4.
 The 
\series bold
-nmsg num_messages
\series medium
 option may be used for testing purposes.
 This argument indicates that only the first 
\begin_inset Quotes eld
\end_inset


\series default
num_messages
\series medium

\begin_inset Quotes erd
\end_inset

 
\series default
PrepBUFR
\series medium
 messages should be processed rather than the whole file.
 This option is provided to speed up testing because running the PB2NC tool
 can take a few minutes for each file.
 Most users will not need this option.
\end_layout

\begin_layout Description

\series medium
5.
 The 
\series bold
-dump path
\series medium
 option may be used to dump the entire contents of the 
\series default
PrepBUFR
\series medium
 file to several ASCII files written to the directory specified by 
\begin_inset Quotes eld
\end_inset


\series default
path
\series medium

\begin_inset Quotes erd
\end_inset

.
 The user may use this option to view a human-readable version of the input
 
\series default
PrepBUFR
\series medium
 file, although writing the contents to ASCII files can be slow.
\end_layout

\begin_layout Description

\series medium
6.
 The 
\series bold
-index
\series medium
 option shows the available variables with valid data from the BUFR input.
 It collects the available variable list from BUFR input and checks the
 existence of valid data and directs the variable names with valid data
 to the screen.
 The NetCDF output won't be generated.
 
\end_layout

\begin_layout Description

\series medium
7.
 The 
\series bold
-log file
\series medium
 option directs output and errors to the specified log file.
 All messages will be written to that file as well as 
\series default
standard out and error
\series medium
.
 Thus, users can save the messages without having to redirect the output
 on the command line.
 The default behavior is no log file.
 
\end_layout

\begin_layout Description

\series medium
8.
 The 
\series bold
-v level
\series medium
 option indicates the desired level of verbosity.
 The value of 
\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset

 will override the default setting of 2.
 Setting the verbosity to 0 will make the tool run with no log messages,
 while increasing the verbosity above 1 will increase the amount of logging.
\end_layout

\begin_layout Description

\series medium
9.

\series default
 The 
\series bold
-compress level
\series default
 option indicates the desired level of compression (deflate level) for NetCDF
 variables.
 The valid level is between 0 and 9.
 The value of 
\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset

 will override the default setting of 0 from the configuration file or the
 environment variable MET_NC_COMPRESS.
 Setting the compression level to 0 will make no compression for the NetCDF
 output.
 Lower number is for fast compression and higher number is for better compressio
n.
\end_layout

\begin_layout Standard

\series medium
An example of the pb2nc calling sequence is shown below:
\end_layout

\begin_layout LyX-Code
pb2nc sample_pb.blk 
\backslash

\end_layout

\begin_layout LyX-Code
sample_pb.nc 
\backslash

\end_layout

\begin_layout LyX-Code
PB2NCConfig
\end_layout

\begin_layout Standard

\series medium
In this example, the PB2NC tool will process the input 
\series bold
sample_pb.blk
\series medium
 file applying the configuration specified in the 
\series bold
PB2NCConfig
\series medium
 file and write the output to a file named 
\series bold
sample_pb.nc
\series medium
.
\end_layout

\begin_layout Subsection
pb2nc configuration file
\begin_inset CommandInset label
LatexCommand label
name "subsec:pb2nc-configuration-file"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The default configuration file for the PB2NC tool named 
\series bold
PB2NCConfig_default
\series medium
 can be found in the installed share/met/config directory.
 The version used for the example run in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Install_Sample-test-cases"

\end_inset

 is available in 
\series bold
scripts/config
\series default
.
 It is recommended that users make a copy of configuration files prior to
 modifying their contents.
\end_layout

\begin_layout Standard

\series medium
When editing configuration files, environment variables may be used for
 setting the configurable parameters if convenient.
 The configuration file parser expands any environment variables to their
 full value before proceeding.
 Within the configuration file, environment variables must be specified
 in the form: 
\series bold
${VAR_NAME}
\series medium
.
\end_layout

\begin_layout Standard

\series medium
For example, using an environment variable to set the 
\series bold
message_type
\series medium
 (see below) parameter to use ADPUPA and ADPSFC message types might consist
 of the following:
\end_layout

\begin_layout Description

\series medium
* In a C-Shell: 
\series bold
setenv MSG_TYP ' 
\begin_inset Quotes eld
\end_inset

ADPUPA
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

ADPSFC
\begin_inset Quotes erd
\end_inset

 '
\end_layout

\begin_layout Description

\series medium
* In the configuration file: 
\series bold
message_type[] = [ ${MSG_TYP} ]; 
\end_layout

\begin_layout Standard

\series medium
The contents of the default pb2nc configuration file are described below.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
obs_window = { beg  = -5400; end  = 5400; }
\end_layout

\begin_layout LyX-Code

\series bold
mask       = { grid = "";    poly = "";   }
\end_layout

\begin_layout LyX-Code

\series bold
tmp_dir    = "/tmp";
\end_layout

\begin_layout LyX-Code

\series bold
version    = "VN.N";
\end_layout

\begin_layout Standard

\series medium
The configuration options listed above are common to many MET tools and
 are described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:IO_General-MET-Config-Options"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
message_type = [];
\end_layout

\begin_layout Standard

\series medium
Each 
\series default
PrepBUFR
\series medium
 message is tagged with one of eighteen message types as listed in the share/met
/config/README file.
 The 'message_type' refers to the type of observation from which the observation
 value (or 'report') was derived.
 The user may specify a comma-separated list of message types to be retained.
 Providing an empty list indicates that all message types should be retained.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
message_type_map = [ { key = 
\begin_inset Quotes eld
\end_inset

AIRCAR
\begin_inset Quotes erd
\end_inset

; val = 
\begin_inset Quotes eld
\end_inset

AIRCAR_PROFILES
\begin_inset Quotes erd
\end_inset

; } ];
\end_layout

\begin_layout Standard
\noindent

\series medium
The 
\series bold
message_type_map
\series medium
 entry is an array of dictionaries, each containing a 
\series bold
key
\series medium
 string and 
\series bold
val
\series medium
 string.
 This defines a mapping of input 
\series default
PrepBUFR
\series medium
 message types to output message types.
 This provides a method for renaming input 
\series default
PrepBUFR
\series medium
 message types.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
message_type_group_map = [
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "SURFACE"; val = "ADPSFC,SFCSHP,MSONET";               },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "ANYAIR";  val = "AIRCAR,AIRCFT";                      },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "ANYSFC";  val = "ADPSFC,SFCSHP,ADPUPA,PROFLR,MSONET"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "ONLYSF";  val = "ADPSFC,SFCSHP";                      }
\end_layout

\begin_layout LyX-Code

\series bold
];
\end_layout

\begin_layout Standard
\noindent

\series medium
The 
\series bold
message_type_group_map
\series medium
 entry is an array of dictionaries, each containing a 
\series bold
key
\series medium
 string and 
\series bold
val
\series medium
 string.
 This defines a mapping of message type group names to a comma-separated
 list of values.
 This map is defined in the config files for PB2NC, Point-Stat, or Ensemble-Stat.
 Modify this map to define sets of message types that should be processed
 together as a group.
 The 
\series bold
SURFACE
\series medium
 entry must be present to define message types for which surface verification
 logic should be applied.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
station_id = [];
\end_layout

\begin_layout Standard

\series medium
Each 
\series default
PrepBUFR
\series medium
 message has a station identification string associated with it.
 The user may specify a comma-separated list of station IDs to be retained.
 Providing an empty list indicates that messages from all station IDs will
 be retained.
 It can be a file name containing a list of stations.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
elevation_range = { beg = -1000; end = 100000; }
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
beg
\series medium
 and
\series bold
 end
\series medium
 variables are used to stratify the elevation (in meters) of the observations
 to be retained.
 The range shown above is set to -1000 to 100000 meters, which essentially
 retains every observation.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
pb_report_type  = [];
\end_layout

\begin_layout LyX-Code

\series bold
in_report_type  = [];
\end_layout

\begin_layout LyX-Code

\series bold
instrument_type = [];
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
pb_report_type, in_report_type
\series default
,
\series medium
 and 
\series bold
instrument_type
\series medium
 variables are used to specify comma-separated lists of 
\series default
PrepBUFR
\series medium
 report types, input report types, and instrument types to be retained,
 respectively.
 If left empty, all 
\series default
PrepBUFR
\series medium
 report types, input report types, and instrument types will be retained.
 See the following for more details:
\end_layout

\begin_layout Standard
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.emc.ncep.noaa.gov/mmb/data_processing/PrepBUFR.doc/table_4.htm
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.emc.ncep.noaa.gov/mmb/data_processing/PrepBUFR.doc/table_6.htm
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
level_range    = { beg = 1; end = 255; }
\end_layout

\begin_layout LyX-Code

\series bold
level_category = [];
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
beg
\series medium
 and 
\series bold
end
\series medium
 variables are used to stratify the model level of observations to be retained.
 The range shown above is 1 to 255.
 
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
level_category
\series medium
 variable is used to specify a comma-separated list of 
\series default
PrepBUFR
\series medium
 data level categories to retain.
 An empty string indicates that all level categories should be retained.
 Accepted values and their meanings are described in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "table_reform-point_pb2nc_level_category"

\end_inset

.
 See the following for more details:
\end_layout

\begin_layout Standard

\series medium
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.emc.ncep.noaa.gov/mmb/data_processing/PrepBUFR.doc/table_1.htm 
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\series bold
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\series bold
\begin_inset Caption Standard

\begin_layout Plain Layout
Values for the level_category option.
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "table_reform-point_pb2nc_level_category"

\end_inset


\end_layout

\begin_layout Plain Layout
\align center

\series bold
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="2in">
<column alignment="center" valignment="top" width="4in">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Level category value
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Description
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Surface level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mandatory level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Significant temperature level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Winds-by-pressure level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Winds-by-height level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Tropopause level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Reports on a single level
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Auxiliary levels generated via interpolation from spanning levels
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
obs_bufr_var = [ 'QOB', 'TOB', 'ZOB', 'UOB', 'VOB' ];
\end_layout

\begin_layout Standard

\series medium
Each 
\series default
PrepBUFR
\series medium
 message will likely contain multiple observation variables.
 The 
\series bold
obs_bufr_var
\series medium
 variable is used to specify which observation variables should be retained
 or derived.
 The variable name comes from BUFR file which includes BUFR table.
 The following BUFR names may be retained: QOB, TOB, ZOB, UOB, and VOB for
 specific humidity, temperature, height, and the u and v components of winds.
 The following BUFR names may be derived: D_DPT, D_WIND, D_RH, D_MIXR, D_PRMSL,
 D_PBL, and D_CAPE for dew point, wind speed, relative humidity, mixing
 ratio, pressure reduced to MSL, planetary boundary layer height, and convective
 available potential energy.
 This configuration replaces 
\series bold
obs_grib_code
\series medium
.
 If the list is empty, all BUFR variables are retained.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
obs_bufr_map = [
\end_layout

\begin_deeper
\begin_layout LyX-Code

\series bold
{ key = 'POB';      val = 'PRES';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'QOB';      val = 'SPFH';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'TOB';      val = 'TMP';   },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'ZOB';      val = 'HGT';   },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'UOB';      val = 'UGRD';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'VOB';      val = 'VGRD';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_DPT';    val = 'DPT';   },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_WDIR';   val = 'WDIR';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_WIND';   val = 'WIND';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_RH';     val = 'RH';    },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_MIXR';   val = 'MIXR';  },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_PRMSL';  val = 'PRMSL'; },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_PBL';    val = 'PBL';   },
\end_layout

\begin_layout LyX-Code

\series bold
{ key = 'D_CAPE';   val = 'CAPE';  }
\end_layout

\begin_layout LyX-Code

\series bold
];
\end_layout

\end_deeper
\begin_layout Standard

\series medium
The BUFR variable names are not shared with other forecast data.
 This map is used to convert the BUFR name to the common name, like GRIB2.
 It allows to share the configuration for forecast data with PB2NC observation
 data.
 If there is no mapping, the BUFR variable name will be saved to output
 NetCDF file.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
quality_mark_thresh = 2;
\end_layout

\begin_layout Standard

\series medium
Each observation has a quality mark value associated with it.
 The 
\series bold
quality_mark_thresh
\series medium
 is used to stratify out which quality marks will be retained.
 The value shown above indicates that only observations with quality marks
 less than or equal to 2 will be retained.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
event_stack_flag = TOP;
\end_layout

\begin_layout Standard

\series medium
A 
\series default
PrepBUFR
\series medium
 message may contain duplicate observations with different quality mark
 values.
 The
\series bold

\begin_inset Newline newline
\end_inset

event_stack_flag
\series medium
 indicates whether to use the observations at the top of the event stack
 (observation values have had more quality control processing applied) or
 the bottom of the event stack (observation values have had no quality control
 processing applied).
 The flag value of
\series bold
 TOP
\series medium
 listed above indicates the observations with the most amount of quality
 control processing should be used, the 
\series bold
BOTTOM
\series medium
 option uses the data closest to raw values.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
time_summary = {
\end_layout

\begin_layout LyX-Code

\series bold
   flag       = FALSE;
\end_layout

\begin_layout LyX-Code

\series bold
   raw_data   = FALSE;
\end_layout

\begin_layout LyX-Code

\series bold
   beg        = "000000";
\end_layout

\begin_layout LyX-Code

\series bold
   end        = "235959";
\end_layout

\begin_layout LyX-Code

\series bold
   step       = 300;
\end_layout

\begin_layout LyX-Code

\series bold
   width      = 600;
\end_layout

\begin_layout LyX-Code

\series bold
   // width   = { beg = -300; end = 300; }
\end_layout

\begin_layout LyX-Code

\series bold
   grib_code  = [];
\end_layout

\begin_layout LyX-Code

\series bold
   obs_var    = [ "TMP", "WDIR", "RH" ];
\end_layout

\begin_layout LyX-Code

\series bold
   type       = [ "min", "max", "range", "mean", "stdev", "median", "p80"
 ];
\end_layout

\begin_layout LyX-Code

\series bold
   vld_freq   = 0;
\end_layout

\begin_layout LyX-Code

\series bold
   vld_thresh = 0.0;
\end_layout

\begin_layout LyX-Code

\series bold
}
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
time_summary
\series medium
 dictionary enables additional processing for observations with high temporal
 resolution.
 The 
\series bold
flag
\series medium
 entry toggles the 
\series bold
time_summary
\series medium
 on (
\series bold
TRUE
\series medium
) and off (
\series bold
FALSE
\series medium
).
 If the 
\series bold
raw_data
\series medium
 flag is set to TRUE, then both the individual observation values and the
 derived time summary value will be written to the output.
 If FALSE, only the summary values are written.
 Observations may be summarized across the user specified time period defined
 by the 
\series bold
beg
\series medium
 and 
\series bold
end
\series medium
 entries in HHMMSS format.
 The 
\series bold
step
\series medium
 entry defines the time between intervals in seconds.
 The 
\series bold
width
\series medium
 entry specifies the summary interval in seconds.
 It may either be set as an integer number of seconds for a centered time
 interval or a dictionary with beginning and ending time offsets in seconds.
\end_layout

\begin_layout Standard

\series medium
This example listed above does a 10-minute time summary (width = 600;) every
 5 minutes (step = 300;) throughout the day (beg = 
\begin_inset Quotes eld
\end_inset

000000
\begin_inset Quotes erd
\end_inset

; end = 235959
\begin_inset Quotes erd
\end_inset

;).
 The first interval will be from 23:55:00 the previous day through 00:04:59
 of the current day.
 The second interval will be from 0:00:00 through 00:09:59.
 And so on.
\end_layout

\begin_layout Standard
The two 
\series bold
width
\series default
 settings listed above are equivalent.
 Both define a centered 10-minute time interval.
 Use the 
\series bold
beg
\series default
 and 
\series bold
end
\series default
 entries to define uncentered time intervals.
 The following example requests observations for one hour prior:
\end_layout

\begin_layout LyX-Code

\series bold
width = { beg = -3600; end = 0; }
\end_layout

\begin_layout Standard

\series medium
The summaries will only be calculated for the observations specified in
 the 
\series bold
grib_code
\series medium
 or 
\series bold
obs_var
\series medium
 entries.
 The 
\series bold
grib_code
\series medium
 entry is an array of integers while the 
\series bold
obs_var
\series medium
 entries is an array of strings.
 The supported summaries are 
\series bold
min
\series medium
 (minimum),
\series bold
 max
\series medium
 (maximum), 
\series bold
range
\series medium
, 
\series bold
mean
\series medium
, 
\series bold
stdev
\series medium
 (standard deviation), 
\series bold
median
\series medium
 and 
\series bold
p##
\series medium
 (percentile, with the desired percentile value specified in place of ##).
 If multiple summaries are selected in a single run, a string indicating
 the summary method applied will be appended to the output message type.
\end_layout

\begin_layout Standard
The 
\series bold
vld_freq
\series default
 and 
\series bold
vld_thresh
\series default
 entries specify the required ratio of valid data for an output time summary
 value to be computed.
 This option is only applied when these entries are set to non-zero values.
 The 
\series bold
vld_freq
\series default
 entry specifies the expected frequency of observations in seconds.
 The width of the time window is divided by this frequency to compute the
 expected number of observations for the time window.
 The actual number of valid observations is divided by the expected number
 to compute the ratio of valid data.
 An output time summary value will only be written if that ratio is greater
 than or equal to the 
\series bold
vld_thresh
\series default
 entry.
 Detailed information about which observations are excluded is provided
 at debug level 4.
\end_layout

\begin_layout Subsection
pb2nc output
\begin_inset CommandInset label
LatexCommand label
name "subsec:pb2nc-output"

\end_inset


\end_layout

\begin_layout Standard

\series medium
Each NetCDF file generated by the PB2NC tool contains the dimensions and
 variables shown in Tables 
\begin_inset CommandInset ref
LatexCommand ref
reference "table_reform-point_pb2nc_output_dim"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "table_reform-point_pb2nc_output_vars"

\end_inset

.
\end_layout

\begin_layout Standard

\series bold
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\series bold
\begin_inset Caption Standard

\begin_layout Plain Layout
NetCDF file dimensions for pb2nc output.
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "table_reform-point_pb2nc_output_dim"

\end_inset


\end_layout

\begin_layout Plain Layout
\align center

\series bold
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features tabularvalignment="middle">
<column alignment="left" valignment="top" width="1.7in">
<column alignment="left" valignment="top" width="4.3in">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
pb2nc NetCDF DIMENSIONS
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
NetCDF Dimension
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Description
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
mxstr, mxstr2, mxstr3
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximum string lengths (16, 40, and 80)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number of PrepBUFR observations in the file (UNLIMITED)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr, npbhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number of PrepBUFR messages in the file (variable) 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr_typ, nhdr_sid, nhdr_vld
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number of unique header message type, station ID, and valid time strings
 (variable)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs_qty
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number of unique quality control strings (variable)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_var_num
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number of unique observation variable types (variable)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\series bold
\begin_inset Caption Standard

\begin_layout Plain Layout
NetCDF variables in pb2nc output.
 
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "table_reform-point_pb2nc_output_vars"

\end_inset


\end_layout

\begin_layout Plain Layout
\align center

\series bold
\begin_inset Tabular
<lyxtabular version="3" rows="23" columns="3">
<features tabularvalignment="middle">
<column alignment="left" valignment="top" width="2.5cm">
<column alignment="left" valignment="top" width="2.5cm">
<column alignment="left" valignment="top" width="9cm">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
pb2nc NetCDF VARIABLES
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
NetCDF Variable
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Dimension
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Description
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_qty
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer value of the n_obs_qty dimension for the observation quality control
 string.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_hid
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer value of the nhdr dimension for the header arrays with which this
 observation is associated.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_vid
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer value of the obs_var_num dimension for the observation variable
 name, units, and description.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_lvl
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Floating point pressure level in hPa or accumulation interval.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_hgt
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Floating point height in meters above sea level.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_val
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Floating point observation value.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_typ
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer value of the nhdr_typ dimension for the message type string.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_sid
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer value of the nhdr_sid dimension for the station ID string.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_vld
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer value of the nhdr_vld dimension for the valid time string.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_lat, hdr_lon
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Floating point latitude in degrees north and longitude in degrees east.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_elv
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Floating point elevation of observing station in meters above sea level.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_prpt_typ
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
npbhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer PrepBUFR report type value.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_irpt_typ
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
npbhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer input report type value.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_inst_typ
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
npbhdr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer instrument type value.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_typ_table
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr_typ, mxstr2
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing unique message type strings.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_sid_table
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr_sid, mxstr2
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing unique station ID strings.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
hdr_vld_table
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nhdr_vld, mxstr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing unique valid time strings in YYYYMMDD_HHMMSS UTC
 format.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_qty_table
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
nobs_qty, mxstr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing unique quality control strings.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_var
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_var_num, mxstr
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing unique observation variable names.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_unit
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_var_num, mxstr2
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing a units string for the unique observation variable
 names in obs_var.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_desc
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
obs_var_num, mxstr3
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lookup table containing a description string for the unique observation
 variable names in obs_var.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
ASCII2NC tool
\begin_inset CommandInset label
LatexCommand label
name "sec:ASCII2NC-tool"

\end_inset


\end_layout

\begin_layout Standard

\series medium
This section describes how to run the ASCII2NC tool.
 The ASCII2NC tool is used to reformat ASCII point observations into the
 NetCDF format expected by the Point-Stat tool.
 For those users wishing to verify against point observations that are not
 available in 
\series default
PrepBUFR
\series medium
 format, the ASCII2NC tool provides a way of incorporating those observations
 into MET.
 If the ASCII2NC tool is used to perform a reformatting step, no configuration
 file is needed.
 However, for more complex processing, such as summarizing time series observati
ons, a configuration file may be specified.
 For details on the configuration file options, see the share/met/config/README
 file and example configuration files distributed with the MET code.
 
\end_layout

\begin_layout Standard

\series medium
Initial versions of the ASCII2NC tool supported only a simple 11 column
 ASCII point observation format.
 It currently supports point observation data in the following formats:
 the default 11 column format, little_r format, SURFace RADiation (SURFRAD)
 and Integrated Surface Irradiance Study (ISIS) formats (found at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.esrl.noaa.gov/gmd/grad/surfrad/
\end_layout

\end_inset

), the Western Wind and Solar Integration Study (WWSIS) format, and the
 AErosol RObotic NEtwork (AERONET) versions 2 and 3 format (found at 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://aeronet.gsfc.nasa.gov/
\end_layout

\end_inset

).
 WWSIS data are available by request from National Renewable Energy Laboratory
 (NREL) in Boulder, CO.
\end_layout

\begin_layout Standard
MET version 9.0 adds support for the passing observations to ascii2nc using
 a Python script with the 
\begin_inset Quotes eld
\end_inset

-format python
\begin_inset Quotes erd
\end_inset

 option.
 An example of running ASCII2NC with Python embedding is included below.
\end_layout

\begin_layout Standard

\series medium
The default ASCII point observation format consists of one row of data per
 observation value.
 Each row of data consists of 11 columns as shown in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "table_reform-point_ascii2nc_format"

\end_inset

.
\end_layout

\begin_layout Standard

\series bold
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout

\series bold
\begin_inset Caption Standard

\begin_layout Plain Layout
Input MET ascii2nc point observation format
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "table_reform-point_ascii2nc_format"

\end_inset


\end_layout

\begin_layout Plain Layout
\align center

\series bold
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="3">
<features tabularvalignment="middle">
<column alignment="left" valignment="top" width="0.5in">
<column alignment="left" valignment="top" width="1.5in">
<column alignment="left" valignment="top" width="4in">
<row>
<cell multicolumn="1" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
ascii2nc ASCII Point Observation Format
\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multicolumn="2" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Column
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Name
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Description
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Message_Type
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text string containing the observation message type as described in the
 previous section on the PB2NC tool.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Station_ID
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text string containing the station id.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
3
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Valid_Time
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Text string containing the observation valid time in YYYYMMDD_HHMMSS format.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lat
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Latitude in degrees north of the observing location.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Lon
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Longitude in degrees east of the observation location.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
6
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elevation
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elevation in msl of the observing location.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GRIB_Code or Variable_Name
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Integer GRIB code value or variable name corresponding to this observation
 type.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
8
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Level
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Pressure level in hPa or accumulation interval in hours for the observation
 value.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
9
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Height
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Height in msl or agl of the observation value.
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
QC_String
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Quality control value.
 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
11
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Observation_Value
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Observation value in units consistent with the GRIB code definition.
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
ascii2nc usage
\begin_inset CommandInset label
LatexCommand label
name "subsec:ascii2nc-usage"

\end_inset


\end_layout

\begin_layout Standard

\series medium
Once the ASCII point observations have been formatted as expected, the ASCII
 file is ready to be processed by the ASCII2NC tool.
 The usage statement for ASCII2NC tool is shown below:
\end_layout

\begin_layout LyX-Code

\series bold
Usage:
\series default
 ascii2nc
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

ascii_file1 [ascii_file2 ...
 ascii_filen]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

netcdf_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-format ASCII_format]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-config file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-mask_grid string]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-mask_poly file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-mask_sid file|list]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-log file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-v level]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-compress level]
\end_layout

\begin_layout Standard
ascii2nc has two required arguments and can take several optional ones.
 
\end_layout

\begin_layout Standard

\series bold
\bar under
Required arguments for ascii2nc
\end_layout

\begin_layout Description

\series medium
1.
 The 
\series bold
ascii_file
\series medium
 argument is the ASCII point observation file(s) to be processed.
 If using Python embedding with 
\begin_inset Quotes eld
\end_inset

-format python
\begin_inset Quotes erd
\end_inset

 provide a quoted string containing the Python script to be run followed
 by any command line arguments that script takes.
\end_layout

\begin_layout Description

\series medium
2.
 The 
\series bold
netcdf_file
\series medium
 argument is the NetCDF output file to be written.
\end_layout

\begin_layout Standard

\series bold
\bar under
Optional arguments for ascii2nc
\end_layout

\begin_layout Description

\series medium
3.
 The 
\series bold
-format ASCII_format
\series medium
 option may be set to 
\begin_inset Quotes eld
\end_inset

met_point
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

little_r
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

surfrad
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

wwsis
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

aeronet
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

aeronetv2
\begin_inset Quotes erd
\end_inset

, 
\begin_inset Quotes eld
\end_inset

aeronetv3
\begin_inset Quotes erd
\end_inset

, or 
\begin_inset Quotes eld
\end_inset

python
\begin_inset Quotes erd
\end_inset

.
 If passing in ISIS data, use the 
\begin_inset Quotes eld
\end_inset

surfrad
\begin_inset Quotes erd
\end_inset

 format flag.
\end_layout

\begin_layout Description

\series medium
4.
 The 
\series bold
-config file 
\series medium
option is the configuration file for generating time summaries.
\end_layout

\begin_layout Description

\series medium
5.
 The 
\series bold
-mask_grid string
\series medium
 option is a named grid or a gridded data file to filter the point observations
 spatially.
\end_layout

\begin_layout Description

\series medium
6.
 The 
\series bold
-mask_poly file
\series medium
 option is a polyline masking file to filter the point observations spatially.
\end_layout

\begin_layout Description

\series medium
7.
 The 
\series bold
-mask_sid file|list 
\series medium
option is a station ID masking file or a comma-separated list of station
 ID's to filter the point observations spatially.
 See the description of the 
\begin_inset Quotes eld
\end_inset

sid
\begin_inset Quotes erd
\end_inset

 entry in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:IO_General-MET-Config-Options"

\end_inset

.
\end_layout

\begin_layout Description

\series medium
8.
 The 
\series bold
-log file 
\series medium
option directs output and errors to the specified log file.
 All messages will be written to that file as well as 
\series default
standard out and error
\series medium
.
 Thus, users can save the messages without having to redirect the output
 on the command line.
 The default behavior is no log file.
 
\end_layout

\begin_layout Description

\series medium
9.
 The 
\series bold
-v level
\series medium
 option indicates the desired level of verbosity.
 The value of 
\series default

\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset


\series medium
 will override the default setting of 2.
 Setting the verbosity to 0 will make the tool run with no log messages,
 while increasing the verbosity above 1 will increase the amount of logging.
\end_layout

\begin_layout Description

\series medium
10.

\series default
 The 
\series bold
-compress level
\series default
 option indicates the desired level of compression (deflate level) for NetCDF
 variables.
 The valid level is between 0 and 9.
 The value of 
\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset

 will override the default setting of 0 from the configuration file or the
 environment variable MET_NC_COMPRESS.
 Setting the compression level to 0 will make no compression for the NetCDF
 output.
 Lower number is for fast compression and higher number is for better compressio
n.
\end_layout

\begin_layout Standard

\series medium
An example of the 
\series bold
ascii2nc
\series default
 calling sequence is shown below:
\end_layout

\begin_layout LyX-Code
ascii2nc sample_ascii_obs.txt 
\backslash

\end_layout

\begin_layout LyX-Code
sample_ascii_obs.nc
\end_layout

\begin_layout Standard

\series medium
In this example, the ASCII2NC tool will reformat the input 
\series bold
sample_ascii_obs.txt file
\series medium
 into NetCDF format and write the output to a file named 
\series bold
sample_ascii_obs.nc
\series medium
.
\end_layout

\begin_layout Subsubsection
Python Embedding for Point Observations
\begin_inset CommandInset label
LatexCommand label
name "subsec:ascii2nc-pyembed"

\end_inset


\end_layout

\begin_layout Standard
Here is an example of processing the same set of observations but using
 Python embedding instead:
\end_layout

\begin_layout LyX-Code
ascii2nc -format python 
\backslash

\end_layout

\begin_layout LyX-Code
\begin_inset Quotes eld
\end_inset

MET_BASE/python/read_ascii_point.py sample_ascii_obs.txt" 
\backslash

\end_layout

\begin_layout LyX-Code
sample_ascii_obs_python.nc
\end_layout

\begin_layout Standard
Please refer to Appendix 
\begin_inset CommandInset ref
LatexCommand ref
reference "chap:App_F_Python_Embedding"
plural "false"
caps "false"
noprefix "false"

\end_inset

 for more details about Python embedding in MET.
\end_layout

\begin_layout Subsection
ascii2nc configuration file
\begin_inset CommandInset label
LatexCommand label
name "subsec:ascii2nc-configuration-file"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The default configuration file for the ASCII2NC tool named 
\series bold
Ascii2NcConfig_default
\series medium
 can be found in the installed share/met/config directory.
 It is recommended that users make a copy of this file prior to modifying
 its contents.
\end_layout

\begin_layout Standard
The ASCII2NC configuration file is optional and only necessary when defining
 time summaries or message type mapping for little_r data.

\series medium
 The contents of the default ASCII2NC configuration file are described below.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
version = "VN.N";
\end_layout

\begin_layout Standard

\series medium
The configuration options listed above are common to many MET tools and
 are described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:IO_General-MET-Config-Options"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
time_summary = { ...
 }
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
time_summary
\series medium
 feature was implemented to allow additional processing of observations
 with high temporal resolution, such as SURFRAD data every 5 minutes.
 This option is described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:pb2nc-configuration-file"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
message_type_map = [
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-12 SYNOP";  val = "ADPSFC"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-13 SHIP";   val = "SFCSHP"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-15 METAR";  val = "ADPSFC"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-18 BUOY";   val = "SFCSHP"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-281 QSCAT"; val = "ASCATW"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-32 PILOT";  val = "ADPUPA"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-35 TEMP";   val = "ADPUPA"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-88 SATOB";  val = "SATWND"; },
\end_layout

\begin_layout LyX-Code

\series bold
   { key = "FM-97 ACARS";  val = "AIRCFT"; }
\end_layout

\begin_layout LyX-Code

\series bold
];
\end_layout

\begin_layout Standard
This entry is an array of dictionaries, each containing a 
\series bold
key
\series default
 string and 
\series bold
val
\series default
 string which define a mapping of input strings to output message types.
 This mapping is currently only applied when converting input little_r report
 types to output message types.
\end_layout

\begin_layout Subsection
ascii2nc output
\begin_inset CommandInset label
LatexCommand label
name "subsec:ascii2nc-output"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The NetCDF output of the ASCII2NC tool is structured in the same way as
 the output of the PB2NC tool described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:pb2nc-output"

\end_inset

.
\end_layout

\begin_layout Section
MADIS2NC tool
\begin_inset CommandInset label
LatexCommand label
name "sec:MADIS2NC-tool"

\end_inset


\end_layout

\begin_layout Standard

\series medium
This section describes how to run the MADIS2NC tool.
 The MADIS2NC tool is used to reformat Meteorological Assimilation Data
 Ingest System (MADIS) point observations into the NetCDF format expected
 by the MET statistics tools.
 More information about MADIS data and formatting is available at 
\series default

\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://madis.noaa.gov
\end_layout

\end_inset


\series medium
.
 Since the MADIS2NC tool simply performs a reformatting step, no configuration
 file is needed.
 The MADIS2NC tool supports many of the MADIS data types, as listed in the
 usage statement below.
 Support for additional MADIS data types may be added in the future based
 on user feedback.
\end_layout

\begin_layout Subsection
madis2nc usage
\begin_inset CommandInset label
LatexCommand label
name "subsec:madis2nc-usage"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The usage statement for MADIS2NC tool is shown below:
\end_layout

\begin_layout LyX-Code

\series bold
Usage:
\series default
 madis2nc
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

madis_file [madis_file2 ...
 madis_filen]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

out_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

-type str
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-config file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-qc_dd list]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-lvl_dim list]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-rec_beg n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-rec_end n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-mask_grid string]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-mask_poly file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-mask_sid file|list]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-log file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-v level]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-compress level]
\end_layout

\begin_layout Standard
madis2nc has required arguments and can also take optional ones.
 
\end_layout

\begin_layout Standard

\series bold
\bar under
Required arguments for madis2nc
\end_layout

\begin_layout Description

\series medium
1.
 The 
\series bold
madis_file
\series medium
 argument is one or more input MADIS point observation files to be processed.
\end_layout

\begin_layout Description

\series medium
2.
 The 
\series bold
netcdf_file
\series medium
 argument is the NetCDF output file to be written.
\end_layout

\begin_layout Description

\series medium
3.
 The argument 
\series bold
-type str
\series medium
 is type of MADIS observations (metar, raob, profiler, maritime, mesonet
 or acarsProfiles).
\end_layout

\begin_layout Standard

\series bold
\bar under
Optional arguments for madis2nc
\end_layout

\begin_layout Description

\series medium
4.
 The 
\series bold
-config file 
\series medium
option specifies the configuration file to generate summaries of the fields
 in the ASCII files.
\end_layout

\begin_layout Description

\series medium
5.
 The 
\series bold
-qc_dd list
\series medium
 option specifies a comma-separated list of QC flag values to be accepted
\begin_inset Newline newline
\end_inset

(Z,C,S,V,X,Q,K,G,B).
\end_layout

\begin_layout Description

\series medium
6.
 The 
\series bold
-lvl_dim list option
\series medium
 specifies a comma-separated list of vertical level dimensions to be processed.
\end_layout

\begin_layout Description

\series medium
7.
 To specify the exact records to be processed, the 
\series bold
-rec_beg n
\series medium
 specifies the index of the first MADIS record to process and 
\series bold
-rec_end n
\series medium
 specifies the index of the last MADIS record to process.
 Both are zero-based.
\end_layout

\begin_layout Description

\series medium
8.
 The 
\series bold
-mask_grid string
\series medium
 option specifies a named grid or a gridded data file for filtering the
 point observations spatially.
\end_layout

\begin_layout Description

\series medium
9.
 The 
\series bold
-mask_poly file
\series medium
 option defines a polyline masking file for filtering the point observations
 spatially.
\end_layout

\begin_layout Description

\series medium
10.
 The 
\series bold
-mask_sid file|list 
\series medium
option is a station ID masking file or a comma-separated list of station
 ID's for filtering the point observations spatially.
 See the description of the 
\begin_inset Quotes eld
\end_inset

sid
\begin_inset Quotes erd
\end_inset

 entry in 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:IO_General-MET-Config-Options"

\end_inset

.
\end_layout

\begin_layout Description

\series medium
11.
 The 
\series bold
-log file
\series medium
 option directs output and errors to the specified log file.
 All messages will be written to that file as well as 
\series default
standard out and error
\series medium
.
 Thus, users can save the messages without having to redirect the output
 on the command line.
 The default behavior is no log file.
 
\end_layout

\begin_layout Description

\series medium
12.
 The 
\series bold
-v level
\series medium
 option indicates the desired level of verbosity.
 The value of 
\series default

\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset


\series medium
 will override the default setting of 2.
 Setting the verbosity to 0 will make the tool run with no log messages,
 while increasing the verbosity will increase the amount of logging.
\end_layout

\begin_layout Description

\series medium
13.

\series default
 The 
\series bold
-compress level
\series default
 option specifies the desired level of compression (deflate level) for NetCDF
 variables.
 The valid level is between 0 and 9.
 Setting the compression level to 0 will make no compression for the NetCDF
 output.
 Lower number is for fast compression and higher number is for better compressio
n.
\end_layout

\begin_layout Standard

\series medium
An example of the madis2nc calling sequence is shown below:
\end_layout

\begin_layout LyX-Code
madis2nc sample_madis_obs.nc 
\backslash

\end_layout

\begin_layout LyX-Code
sample_madis_obs_met.nc -log madis.log -v 3
\end_layout

\begin_layout Standard

\series medium
In this example, the MADIS2NC tool will reformat the input 
\series default
sample_madis_obs.nc
\series medium
 file into NetCDF format and write the output to a file named 
\series default
sample_madis_obs_met.nc
\series medium
.
 Warnings and error messages will be written to the madis.log file, and the
 verbosity level of logging is three.
\end_layout

\begin_layout Subsection
madis2nc configuration file
\begin_inset CommandInset label
LatexCommand label
name "subsec:madis2nc-configuration-file"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The default configuration file for the MADIS2NC tool named 
\series bold
Madis2NcConfig_default
\series medium
 can be found in the installed share/met/config directory.
 It is recommended that users make a copy of this file prior to modifying
 its contents.
\end_layout

\begin_layout Standard
The MADIS2NC configuration file is optional and only necessary when defining
 time summaries.

\series medium
 The contents of the default MADIS2NC configuration file are described below.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
version = "VN.N";
\end_layout

\begin_layout Standard

\series medium
The configuration options listed above are common to many MET tools and
 are described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:IO_General-MET-Config-Options"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset CommandInset line
LatexCommand rule
offset "0.5ex"
width "100col%"
height "1pt"

\end_inset


\end_layout

\begin_layout LyX-Code

\series bold
time_summary = { ...
 }
\end_layout

\begin_layout Standard

\series medium
The 
\series bold
time_summary
\series medium
 dictionary is described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:pb2nc-configuration-file"

\end_inset

.
\end_layout

\begin_layout Subsection
madis2nc output
\begin_inset CommandInset label
LatexCommand label
name "subsec:madis2nc-output"

\end_inset


\end_layout

\begin_layout Standard

\series medium
The NetCDF output of the MADIS2NC tool is structured in the same way as
 the output of the PB2NC tool described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:pb2nc-output"

\end_inset

.
\end_layout

\begin_layout Section
LIDAR2NC tool
\end_layout

\begin_layout Standard
The LIDAR2NC tool creates a NetCDF point observation file from a CALIPSO
 HDF data file.
 Not all of the data present in the CALIPSO file is reproduced in the output,
 however.
 Instead, the output focuses mostly on information about clouds (as opposed
 to aerosols) as seen by the satellite along its ground track.
\end_layout

\begin_layout Subsection
lidar2nc usage
\end_layout

\begin_layout Standard

\series medium
The usage statement for LIDAR2NC tool is shown below:
\end_layout

\begin_layout LyX-Code

\series bold
Usage:
\series default
 lidar2nc
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

lidar_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

-out out_file
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-log file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-v level]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-compress level]
\end_layout

\begin_layout Standard
Unlike most of the MET tools, lidar2nc does not use a config file.
 Currently, the options needed to run lidar2nc are not complex enough to
 require one.
 
\end_layout

\begin_layout Standard

\series bold
\bar under
Required arguments for lidar2nc
\end_layout

\begin_layout Description

\series medium
1.
 The 
\series bold
lidar_file
\series medium
 argument is the input HDF lidar data file to be processed.
 Currently, 
\series default
CALIPSO
\series medium
 files are supported but support for additional file types will be added
 in future releases.
\end_layout

\begin_layout Description

\series medium
2.
 The 
\series bold
out_file
\series medium
 argument is the NetCDF output file to be written.
\end_layout

\begin_layout Standard

\series bold
\bar under
Optional arguments for lidar2nc
\end_layout

\begin_layout Description

\series medium
3.
 The 
\series bold
-log file 
\series medium
option directs output and errors to the specified log file.
 All messages will be written to that file as well as 
\series default
standard out and error
\series medium
.
 Thus, users can save the messages without having to redirect the output
 on the command line.
 The default behavior is no log file.
 
\end_layout

\begin_layout Description

\series medium
4.
 The 
\series bold
-v level
\series medium
 option indicates the desired level of verbosity.
 The value of 
\series default

\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset


\series medium
 will override the default setting of 2.
 Setting the verbosity to 0 will make the tool run with no log messages,
 while increasing the verbosity above 1 will increase the amount of logging.
\end_layout

\begin_layout Description

\series medium
5.
 
\series default
The 
\series bold
-compress level
\series default
 option indicates the desired level of compression (deflate level) for NetCDF
 variables.
 The valid level is between 0 and 9.
 The value of 
\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset

 will override the default setting of 0 from the configuration file or the
 environment variable MET_NC_COMPRESS.
 Setting the compression level to 0 will make no compression for the NetCDF
 output.
 Lower number is for fast compression and higher number is for better compressio
n.
\end_layout

\begin_layout Subsection
lidar2nc output
\end_layout

\begin_layout Standard
Each observation type in the lidar2nc output is assigned a GRIB code.
 These are outlined in Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "lidar2nc_grib_code_table"

\end_inset

.
 GRIB codes were assigned to these fields arbitrarily, with GRIB codes in
 the 600s denoting individual bit fields taken from the feature classification
 flag field in the CALIPSO file.
\end_layout

\begin_layout Standard
We will not give a detailed description of each CALIPSO data product that
 lidar2nc reads.
 Users should refer to existing CALIPSO documentation for this information.
 We will, however, give some explanation of how the cloud layer base and
 top information is encoded in the lidar2nc NetCDF output file.
 
\end_layout

\begin_layout Standard

\series bold
Layer_Base
\series default
 gives the elevation in meters above ground level of the cloud base for
 each cloud level at each observation location.
 Similarly, 
\series bold
Layer_Top
\series default
 gives the elevation of the top of each cloud layer.
 Note that if there are multiple cloud layers at a particular location,
 then there will be more than one base (or top) given for that location.
 For convenience, 
\series bold
Min_Base
\series default
 and 
\series bold
Max_Top
\series default
 give, respectively, the base elevation for the bottom cloud layer, and
 the top elevation for the top cloud layer.
 For these data types, there will be only one value per observation location
 regardless of how many cloud layers there are at that location.
 
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
lidar2nc GRIB codes and their meaning, units, and abbreviations
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "lidar2nc_grib_code_table"

\end_inset


\end_layout

\begin_layout Plain Layout
\noindent
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
GRIB Code
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Meaning
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Units
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\series bold
Abbreviation
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
500
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Number of Cloud Layers
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NLayers
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
501
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cloud Layer Base AGL
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
m
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Layer_Base
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
502
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cloud Layer Top AGL
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
m
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Layer_Top
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
503
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cloud Opacity
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
%
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Opacity
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
504
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CAD Score
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CAD_Score
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
505
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Minimum Cloud Base AGL
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
m
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Min_Base
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
506
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Maximum Cloud Top AGL
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
m
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Max_Top
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
600
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Type
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature_Type
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
601
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ice/Water Phase
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Ice_Water_Phase
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
602
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature Sub-Type
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Feature_Sub_Type
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
603
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cloud/Aerosol/PSC Type QA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Cloud_Aerosol_PSC_Type_QA
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
604
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Horizontal Averaging
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Horizontal_Averaging
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Point2Grid tool
\end_layout

\begin_layout Standard
The Point2Grid tool takes point observations from a NetCDF output file from
 one of the four previously mentioned MET tools (ascii2nc, madis2nc, pb2nc,
 lidar2nc) and creates a gridded NetCDF file.
 The other point observations are 
\series medium
GOES-16/17 input files in NetCDF format
\series default
 (especially, Aerosol Optical Depth.
 Future development will include support for reading input files not produced
 from MET tools.
\end_layout

\begin_layout Subsection
point2grid usage
\end_layout

\begin_layout Standard

\series medium
The usage statement for the Point2Grid tool is shown below:
\end_layout

\begin_layout LyX-Code

\series bold
Usage:
\series default
 point2grid
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

input_filename
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

to_grid
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

output_filename
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

-field string
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-config file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-qc flags]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-adp adp_file_name]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-method type]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-gaussian_dx n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-gaussian_radius n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-prob_cat_thresh n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-vld_thresh n]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-name list]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-log file]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-v level]
\end_layout

\begin_layout LyX-Code
\begin_inset ERT
status open

\begin_layout Plain Layout

{
\backslash
hskip 0.5in}
\end_layout

\end_inset

[-compress level]
\end_layout

\begin_layout Standard

\series bold
\bar under
Required arguments for point2grid
\end_layout

\begin_layout Description

\series medium
1.
 The 
\series bold
input_filename
\series medium
 argument indicates the name of the input NetCDF file to be processed.
 Currently, only NetCDF files produced from the ascii2nc, madis2nc, pb2nc,
 and lidar2nc are supported.
 And AOD dataset from GOES16/17 are supported, too.
 Support for additional file types will be added in future releases.
\end_layout

\begin_layout Description

\series medium
2.
 The to_grid argument defines the output grid as: (1) a named grid, (2)
 the path to a gridded data file, or (3) an explicit grid specification
 string.
\end_layout

\begin_layout Description
3.
 The output_filename argument is the name of the output NetCDF file to be
 written.
\end_layout

\begin_layout Description
4.
 The -field string argument is a string that defines the data to be regridded.
 It may be used multiple times.
 If -adp option is given (for AOD data from GOES16/17), the name consists
 with the variable name from the input data file and the variable name from
 ADP data file (for example, 
\begin_inset Quotes eld
\end_inset

AOD_Smoke
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

AOD_Dust
\begin_inset Quotes erd
\end_inset

: getting AOD variable from the input data and applying smoke or dust variable
 from ADP data file).
 
\end_layout

\begin_layout Standard

\series bold
\bar under
Optional arguments for point2grid
\end_layout

\begin_layout Description

\series medium
5.
 The 
\series bold
-config
\series medium
 file option is the configuration file to be used.
\end_layout

\begin_layout Description
6.
 The 
\series bold
-qc
\series default
 flags option specifies a comma-separated list of quality control (QC) flags,
 for example 
\begin_inset Quotes eld
\end_inset

0,1
\begin_inset Quotes erd
\end_inset

.
 This should only be applied if grid_mapping is set to 
\begin_inset Quotes eld
\end_inset

goes_imager_projection
\begin_inset Quotes erd
\end_inset

 and the QC variable exists.
\end_layout

\begin_layout Description
7.
 The 
\series bold
-adp adp_file_name
\series default
 option provides an additional Aerosol Detection Product (ADP) information
 on aerosols, dust, and smoke.
 This option is ignored if the requested variable is not AOD (
\begin_inset Quotes eld
\end_inset

AOD_Dust
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

AOD_Smoke
\begin_inset Quotes erd
\end_inset

) from GOES16/17.
 The gridded data is filtered by the presence of dust/smoke.
 If -qc options is given, it's applied to QC of dust/smoke, too (First filtering
 with AOD QC values and the second filtering with dust/smoke QC values).
\end_layout

\begin_layout Description
8.
 The 
\series bold
-method type
\series default
 option specifies the regridding method.
 The default method is UW_MEAN.
\end_layout

\begin_layout Description
9.
 The 
\series bold
-gaussian_dx n
\series default
 option defines the 
\series medium
distance interval for Gaussian smoothing.
 
\series default
The default is 81.271 km.
 Ignored if the method is not GAUSSIAN.
\end_layout

\begin_layout Description
10.
 The 
\series bold
-gaussain_radius n
\series default
 option defines the
\series medium
 
\series default
radius of influence for Gaussian interpolation.
 The default is 120.
 Ignored if the method is not GAUSSIAN.
\end_layout

\begin_layout Description
11.
 The 
\series bold
-prob_cat_thresh n
\series default
 option sets the threshold to compute the probability of occurrence.
 The default is set to disabled.
 This option is relevant when calculating practically perfect forecasts.
\end_layout

\begin_layout Description
12.
 The 
\series bold
-vld_thresh n
\series default
 option sets the required ratio of valid data for regridding.
 The default is 0.5.
\end_layout

\begin_layout Description
13.
 The 
\series bold
-name list
\series default
 option specifies a comma-separated list of output variable names for reach
 field specified.
 
\end_layout

\begin_layout Description

\series medium
14.
 The 
\series bold
-log file 
\series medium
option directs output and errors to the specified log file.
 All messages will be written to that file as well as 
\series default
standard out and error
\series medium
.
 Thus, users can save the messages without having to redirect the output
 on the command line.
 The default behavior is no log file.
 
\end_layout

\begin_layout Description

\series medium
15.
 The 
\series bold
-v level
\series medium
 option indicates the desired level of verbosity.
 The value of 
\series default

\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset


\series medium
 will override the default setting of 2.
 Setting the verbosity to 0 will make the tool run with no log messages,
 while increasing the verbosity above 1 will increase the amount of logging.
\end_layout

\begin_layout Description

\series medium
16.
 
\series default
The 
\series bold
-compress level
\series default
 option indicates the desired level of compression (deflate level) for NetCDF
 variables.
 The valid level is between 0 and 9.
 The value of 
\begin_inset Quotes eld
\end_inset

level
\begin_inset Quotes erd
\end_inset

 will override the default setting of 0 from the configuration file or the
 environment variable MET_NC_COMPRESS.
 Setting the compression level to 0 will make no compression for the NetCDF
 output.
 Lower number is for fast compression and higher number is for better compressio
n.
\end_layout

\begin_layout Standard
For the GOES-16 and GOES-17 data, the computing lat/long is time consuming.
 So the computed coordinate (lat/long) is saved into the NetCDF file to
 the environment variable MET_TMP_DIR or /tmp if MET_TMP_DIR is not defined.
 The computing lat/long step can be skipped if the coordinate file is given
 through the environment variable MET_GEOSTATIONARY_DATA.
 
\series medium
An example of call point2grid to process GOES-16 AOD data is shown below:
\end_layout

\begin_layout LyX-Code
point2grid 
\backslash

\end_layout

\begin_layout LyX-Code
OR_ABI-L2-AODC-M3_G16_s20181341702215_e20181341704588_c20181341711418.nc
 
\backslash

\end_layout

\begin_layout LyX-Code
G212 
\backslash

\end_layout

\begin_layout LyX-Code
regrid_data_plane_GOES-16_AOD_TO_G212.nc 
\backslash

\end_layout

\begin_layout LyX-Code
-field 'name="AOD"; level="(*,*)";' 
\backslash

\end_layout

\begin_layout LyX-Code
-qc 0,1,2
\end_layout

\begin_layout LyX-Code
-method MAX -v 1
\end_layout

\begin_layout Standard

\series medium
When processing GOES-16 data, the 
\series bold
-qc
\series medium
 option may also be used to specify the acceptable quality control flag
 values.
 The example above regrids the GOES-16 AOD values to NCEP Grid number 212
 (which QC flags are high, medium, and low), writing to the output the maximum
 AOD value falling inside each grid box.
\end_layout

\begin_layout Subsection
point2grid output
\end_layout

\begin_layout Standard
The point2grid tool will output a gridded NetCDF file containing the following:
 
\end_layout

\begin_layout Standard
1.
 Latitude
\end_layout

\begin_layout Standard
2.
 Longitude
\end_layout

\begin_layout Standard
3.
 The variable specified in the -field string regridded to the grid defined
 in the to_grid argument.
 
\end_layout

\begin_layout Standard
4.
 The count field which represents the number of point observations that
 were included calculating the value of the variable at that grid cell.
\end_layout

\begin_layout Standard
5.
 The mask field which is a binary field representing the presence or lack
 thereof of point observations at that grid cell.
 A value of 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 indicates that there was at least one point observation within the bounds
 of that grid cell and a value of 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 indicates the lack of point observations at that grid cell.
\end_layout

\begin_layout Standard
6.
 The probability field which is the probability of the event defined by
 the line option -prob_cat_thresh n occurring.
 Ranges from 0 to 1.
 
\end_layout

\begin_layout Standard
7.
 The probability mask field which is a binary field that represents whether
 or not there is probability data at that grid point.
 Can be either 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 with 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 meaning the probability value does not exist and a value of 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 meaning that the probability value does exist.
 
\end_layout

\end_body
\end_document
