.. _rmw-analysis:

RMW-Analysis Tool
=================

Introduction
____________

The RMW-Analysis tool analyzes a set of output files generated by the TC-RMW tool. For each grid cell it aggregates variable statistics across the set and across the track points of the tc_rmw output files. The statistics are mean, standard deviation, minimum and maximum. Note that tc_rmw should be set to use the same scale factor of the radius of maximum winds (RMW) as the unit of range for its range-azimuth grid. The specified data variables on the range-azimuth-vertical grid then share a common range scale of RMW before aggregation by rmw_analysis.

Practical information
_____________________

rmw_analysis usage
~~~~~~~~~~~~~~~~~~

The following sections describe the usage statement, required arguments, and optional arguments for **rmw_analysis**.

_______________________

.. code-block:: none
		
  Usage: rmw_analysis
         -data file_1 ... file_n | data_file_list
         -config file
         -out file
         [-log file]
         [-v level]

**rmw_analysis** has required arguments and can accept several optional arguments.

Required arguments for rmw_analysis
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

1. The **-data file_1 ... file_n | data_file_list** argument is the NetCDF output of TC-RMW to be processed or an ASCII file containing a list of files.

2. The **-config file** argument is the **RMWAnalysisConfig** to be used. The contents of the configuration file are discussed below.

3. The **-out** file argument is the NetCDF output file to be written.

Optional arguments for rmw_analysis
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

4. The **-log file** option directs output and errors to the specified log file. All messages will be written to that file as well as standard out and error. Thus, users can save the messages without having to redirect the output on the command line. The default behavior is no logfile. 

5. The **-v level** option indicates the desired level of verbosity. The contents of "level" will override the default setting of 2. Setting the verbosity to 0 will make the tool run with no log messages, while increasing the verbosity above 1 will increase the amount of logging.

rmw_analysis configuration file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The default configuration file for the RMW-Analysis tool named **RMWAnalysisConfig_default** can be found in the installed *share/met/config/* directory. It is encouraged for users to copy these default files before modifying their contents. The contents of the configuration file are described in the subsections below.

______________________

.. code-block:: none

  model = "GFS";
  data  = {
     level = [ "" ];
     field = [
        { name = "PRMSL"; },
        { name = "TMP";   }
     ];
  }

The configuration options listed above are common to many MET tools and are described in :numref:`config_options`.

____________________

.. code-block:: none

  basin      = "";
  storm_name = "";
  storm_id   = "";
  cyclone    = "";
  init_beg   = "";
  init_end   = "";
  valid_beg  = "";
  valid_end  = "";
  init_mask  = "";
  valid_mask = "";
  version    = "VN.N";

The track filter options available in rmw_analysis and listed above are described in :numref:`config_options`.



rmw_analysis output file
~~~~~~~~~~~~~~~~~~~~~~~~

The NetCDF output file will inherit the spatial grid from the first tc_rmw output file in the output file list. All tc_rmw files in this list must have the same grid dimension sizes. A NetCDF output error will result if that is not the case. For each data variable specified in the config file, four corresponding NetCDF variables will be written, e.g. TMP_mean, TMP_stdev, TMP_min, TMP_max. No track point dimension is retained in the rmw_analysis output.
